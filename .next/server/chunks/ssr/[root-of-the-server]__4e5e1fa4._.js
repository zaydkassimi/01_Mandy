module.exports=[6890,(a,b,c)=>{b.exports=a.x("cookie",()=>require("cookie"))},6187,(a,b,c)=>{b.exports=a.x("jsonwebtoken",()=>require("jsonwebtoken"))},5556,a=>{"use strict";var b=a.i(6187);a.i(6890);let c=process.env.JWT_SECRET||"dev-secret";function d(a){try{return b.default.verify(a,c)}catch(a){return null}}a.s(["verifyToken",()=>d])},5813,a=>{"use strict";var b=a.i(9168),c=a.i(7068),d=a.i(2759),e=a.i(3590),f=a.i(7342),g=a.i(8171),h=a.i(6890),i=a.i(5556),j=a.i(7669);function k({user:a}){let[b,c]=(0,j.useState)([]),[d,e]=(0,j.useState)(""),[f,h]=(0,j.useState)(""),[i,k]=(0,j.useState)(""),[l,m]=(0,j.useState)(""),[n,o]=(0,j.useState)(1);async function p(){await fetch("/api/admin/shifts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:d,date:f,start:i,end:l,capacity:n})}),e(""),h(""),k(""),m(""),o(1);let a=await fetch("/api/admin/shifts"),b=await a.json();b.ok&&c(b.shifts||[])}async function q(a){confirm("Delete shift?")&&(await fetch("/api/admin/shifts",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a})}),c(b=>b.filter(b=>b.id!==a)))}return(0,j.useEffect)(()=>{fetch("/api/admin/shifts").then(a=>a.json()).then(a=>{a.ok&&c(a.shifts||[])})},[]),(0,g.jsxs)("main",{children:[(0,g.jsx)("h1",{children:"Manage Shifts"}),(0,g.jsxs)("div",{className:"card",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("input",{placeholder:"title",value:d,onChange:a=>e(a.target.value)})," ",(0,g.jsx)("input",{type:"date",value:f,onChange:a=>h(a.target.value)}),(0,g.jsx)("input",{type:"time",value:i,onChange:a=>k(a.target.value),style:{marginLeft:8}})," ",(0,g.jsx)("input",{type:"time",value:l,onChange:a=>m(a.target.value),style:{marginLeft:8}}),(0,g.jsx)("input",{type:"number",value:n,onChange:a=>o(Number(a.target.value)),style:{width:80,marginLeft:8}}),(0,g.jsx)("button",{className:"btn",onClick:p,style:{marginLeft:8},children:"Add Shift"})]}),(0,g.jsxs)("table",{style:{width:"100%",marginTop:12},children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Title"}),(0,g.jsx)("th",{children:"Date"}),(0,g.jsx)("th",{children:"Time"}),(0,g.jsx)("th",{children:"Cap"}),(0,g.jsx)("th",{children:"Action"})]})}),(0,g.jsx)("tbody",{children:b.map(a=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{style:{padding:8},children:a.title}),(0,g.jsx)("td",{style:{padding:8},children:a.date}),(0,g.jsxs)("td",{style:{padding:8},children:[a.start," - ",a.end]}),(0,g.jsx)("td",{style:{padding:8},children:a.capacity}),(0,g.jsx)("td",{style:{padding:8},children:(0,g.jsx)("button",{className:"btn secondary",onClick:()=>q(a.id),children:"Delete"})})]},a.id))})]})]})]})}function l({req:a}){let b=(a.headers.cookie?(0,h.parse)(a.headers.cookie||""):{}).token,c=b?(0,i.verifyToken)(b):null;return c&&"admin"===c.role?{props:{user:c}}:{redirect:{destination:"/",permanent:!1}}}a.s(["default",()=>k,"getServerSideProps",()=>l],2132);var m=a.i(2132),n=a.i(9193);let o=(0,d.hoist)(m,"default"),p=(0,d.hoist)(m,"getStaticProps"),q=(0,d.hoist)(m,"getStaticPaths"),r=(0,d.hoist)(m,"getServerSideProps"),s=(0,d.hoist)(m,"config"),t=(0,d.hoist)(m,"reportWebVitals"),u=(0,d.hoist)(m,"unstable_getStaticProps"),v=(0,d.hoist)(m,"unstable_getStaticPaths"),w=(0,d.hoist)(m,"unstable_getStaticParams"),x=(0,d.hoist)(m,"unstable_getServerProps"),y=(0,d.hoist)(m,"unstable_getServerSideProps"),z=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/admin/shifts",pathname:"/admin/shifts",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:m}),A=(0,n.getHandler)({srcPage:"/admin/shifts",config:s,userland:m,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});a.s(["config",0,s,"default",0,o,"getServerSideProps",0,r,"getStaticPaths",0,q,"getStaticProps",0,p,"handler",0,A,"reportWebVitals",0,t,"routeModule",0,z,"unstable_getServerProps",0,x,"unstable_getServerSideProps",0,y,"unstable_getStaticParams",0,w,"unstable_getStaticPaths",0,v,"unstable_getStaticProps",0,u],5813)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4e5e1fa4._.js.map