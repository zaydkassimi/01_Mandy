{"version":3,"sources":["../../../lib/auth.js","../../../lib/db.js","../../../pages/api/admin/assign_shift.js","../../../node_modules/next/dist/esm/build/templates/pages-api.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\r\nimport { serialize } from \"cookie\";\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET || \"dev-secret\";\r\n\r\nexport function signToken(payload) {\r\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: \"8h\" });\r\n}\r\n\r\nexport function verifyToken(token) {\r\n  try {\r\n    return jwt.verify(token, JWT_SECRET);\r\n  } catch (e) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function setTokenCookie(res, token) {\r\n  const cookie = serialize(\"token\", token, {\r\n    httpOnly: true,\r\n    path: \"/\",\r\n    maxAge: 60 * 60 * 8\r\n  });\r\n  res.setHeader(\"Set-Cookie\", cookie);\r\n}\r\n\r\nexport function clearTokenCookie(res) {\r\n  const cookie = serialize(\"token\", \"\", {\r\n    httpOnly: true,\r\n    path: \"/\",\r\n    maxAge: 0\r\n  });\r\n  res.setHeader(\"Set-Cookie\", cookie);\r\n}\r\n\r\n\r\n","import fs from \"fs\";\r\nimport path from \"path\";\r\n\r\nconst DB_PATH = path.join(process.cwd(), \"data\", \"db.json\");\r\n\r\nexport async function readDB() {\r\n  const raw = await fs.promises.readFile(DB_PATH, \"utf-8\");\r\n  return JSON.parse(raw);\r\n}\r\n\r\nexport async function writeDB(data) {\r\n  await fs.promises.writeFile(DB_PATH, JSON.stringify(data, null, 2), \"utf-8\");\r\n}\r\n\r\nexport async function findUserByEmail(email) {\r\n  const db = await readDB();\r\n  return db.users.find((u) => u.email === email);\r\n}\r\n\r\nexport async function addUser(user) {\r\n  const db = await readDB();\r\n  db.users.push(user);\r\n  await writeDB(db);\r\n  return user;\r\n}\r\n\r\nexport async function getAvailabilitiesByEmail(email) {\r\n  const db = await readDB();\r\n  if (!db.availabilities) db.availabilities = [];\r\n  return db.availabilities.filter((a) => a.email === email);\r\n}\r\n\r\nexport async function setAvailability(email, date, status) {\r\n  const db = await readDB();\r\n  if (!db.availabilities) db.availabilities = [];\r\n  // remove existing for the date\r\n  db.availabilities = db.availabilities.filter((a) => !(a.email === email && a.date === date));\r\n  if (status) {\r\n    db.availabilities.push({ email, date, status });\r\n  }\r\n  await writeDB(db);\r\n  return true;\r\n}\r\n\r\nexport async function addAttendance(record) {\r\n  const db = await readDB();\r\n  if (!db.attendances) db.attendances = [];\r\n  db.attendances.push(record);\r\n  await writeDB(db);\r\n  return record;\r\n}\r\n\r\nexport async function getAttendanceByEmail(email) {\r\n  const db = await readDB();\r\n  if (!db.attendances) db.attendances = [];\r\n  return db.attendances.filter((a) => a.email === email);\r\n}\r\n\r\nexport async function getAllAttendances() {\r\n  const db = await readDB();\r\n  if (!db.attendances) db.attendances = [];\r\n  return db.attendances;\r\n}\r\n\r\nexport async function setAttendanceApproved(id, approved) {\r\n  const db = await readDB();\r\n  if (!db.attendances) db.attendances = [];\r\n  const rec = db.attendances.find((r) => r.id === id);\r\n  if (!rec) return false;\r\n  rec.approved = !!approved;\r\n  await writeDB(db);\r\n  return true;\r\n}\r\n\r\n// Admin / staff management\r\nexport async function listUsers() {\r\n  const db = await readDB();\r\n  return db.users || [];\r\n}\r\n\r\nexport async function deleteUserByEmail(email) {\r\n  const db = await readDB();\r\n  db.users = (db.users || []).filter((u) => u.email !== email);\r\n  await writeDB(db);\r\n  return true;\r\n}\r\n\r\n// Shifts\r\nexport async function listShifts() {\r\n  const db = await readDB();\r\n  db.shifts = db.shifts || [];\r\n  return db.shifts;\r\n}\r\n\r\nexport async function addShift(shift) {\r\n  const db = await readDB();\r\n  db.shifts = db.shifts || [];\r\n  db.shifts.push(shift);\r\n  await writeDB(db);\r\n  return shift;\r\n}\r\n\r\nexport async function deleteShiftById(id) {\r\n  const db = await readDB();\r\n  db.shifts = (db.shifts || []).filter((s) => s.id !== id);\r\n  await writeDB(db);\r\n  return true;\r\n}\r\n\r\n// Expenses\r\nexport async function listExpenses() {\r\n  const db = await readDB();\r\n  db.expenses = db.expenses || [];\r\n  return db.expenses;\r\n}\r\n\r\nexport async function addExpense(exp) {\r\n  const db = await readDB();\r\n  db.expenses = db.expenses || [];\r\n  db.expenses.push(exp);\r\n  await writeDB(db);\r\n  return exp;\r\n}\r\n\r\nexport async function getSettings() {\r\n  const db = await readDB();\r\n  db.settings = db.settings || { siteTitle: \"Staff Scheduler\", logo: null };\r\n  return db.settings;\r\n}\r\n\r\nexport async function setSettings(settings) {\r\n  const db = await readDB();\r\n  db.settings = Object.assign(db.settings || {}, settings);\r\n  await writeDB(db);\r\n  return db.settings;\r\n}\r\n\r\n// Admin helpers\r\nexport async function getAllAvailabilities() {\r\n  const db = await readDB();\r\n  db.availabilities = db.availabilities || [];\r\n  return db.availabilities;\r\n}\r\n\r\nexport async function assignUserToShift(shiftId, email) {\r\n  const db = await readDB();\r\n  db.shifts = db.shifts || [];\r\n  const shift = db.shifts.find((s) => s.id === shiftId);\r\n  if (!shift) return false;\r\n  shift.assigned = shift.assigned || [];\r\n  if (!shift.assigned.includes(email)) shift.assigned.push(email);\r\n  await writeDB(db);\r\n  return true;\r\n}\r\n\r\nexport async function setExpenseApproved(id, approved) {\r\n  const db = await readDB();\r\n  db.expenses = db.expenses || [];\r\n  const rec = db.expenses.find((r) => r.id === id);\r\n  if (!rec) return false;\r\n  rec.approved = !!approved;\r\n  await writeDB(db);\r\n  return true;\r\n}\r\n\r\n\r\n","import { parse } from \"cookie\";\r\nimport { verifyToken } from \"../../../lib/auth\";\r\nimport { assignUserToShift } from \"../../../lib/db\";\r\n\r\nexport default async function handler(req, res) {\r\n  const cookies = req.headers.cookie ? parse(req.headers.cookie || \"\") : {};\r\n  const token = cookies.token;\r\n  const user = token ? verifyToken(token) : null;\r\n  if (!user || user.role !== \"admin\") return res.status(403).json({ ok: false, message: \"admin only\" });\r\n  if (req.method !== \"POST\") return res.status(405).end();\r\n  const { shiftId, email } = req.body || {};\r\n  if (!shiftId || !email) return res.status(400).json({ ok: false, message: \"shiftId & email required\" });\r\n  const ok = await assignUserToShift(shiftId, email);\r\n  return res.json({ ok });\r\n}\r\n\r\n\r\n","import { sendError } from \"next/dist/esm/server/api-utils\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { PagesAPIRouteModule } from \"next/dist/esm/server/route-modules/pages-api/module.compiled\";\nimport { hoist } from \"next/dist/esm/build/templates/helpers\";\n// Import the userland code.\nimport * as userland from \"INNER_PAGE\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { addRequestMeta } from \"next/dist/esm/server/request-meta\";\n// Re-export the handler (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export config.\nexport const config = hoist(userland, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new PagesAPIRouteModule({\n    definition: {\n        kind: RouteKind.PAGES_API,\n        page: \"/api/admin/assign_shift\",\n        pathname: \"/api/admin/assign_shift\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland,\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || ''\n});\nexport async function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/admin/assign_shift\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    }\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = getTracer();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: process.env.__NEXT_ALLOWED_REVALIDATE_HEADERS,\n                multiZoneDraftMode: Boolean(process.env.__NEXT_MULTI_ZONE_DRAFT_MODE),\n                trustHostHeader: process.env.__NEXT_TRUST_HOST_HEADER,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/admin/assign_shift\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        sendError(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n"],"names":[],"mappings":"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","ignoreList":[3]}